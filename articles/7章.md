## (没怎么看懂，视频质量不是很好，智障！智障解说！！！
##失望，文稿全部是抄的别人的
##[http2](https://blog.csdn.net/u011904605/article/details/53012844)


## 7-1 http协议瓶颈

 一条连接上只可以发送一个请求
 
 将域名解析为ip, 这个工作由 DNS 做
 
 请求只能从客户端开始，客户端不可以接受除响应以外的指令。
 
 请求头、响应头不经过压缩就发送
 
 每次相互发送相同的头造成的浪费较多
 
 
## 7-2  websocket 与 http
 
 
 http 1.0, 一个 tcp 中只能发送一个 http请求
 
 http1.1 ，持久化链接，一个 tcp链接中，可以发送多个 http 请求
 
  
  
  
  upgrade: websocket  
  connect: upgrade    
  sec-websokcet-key:  
  sec-websokcet-protocol:  
  sec-websokcet-version:   
  
  
  客户端：我要建立websocket 协议，  
  服务端：OK，已经升级为 websocket 协议，  
  客户端： 有信息的时候推送给我  
  服务端：好的。  
  
  websocket 只有一次 tcp 链接。  
  
## 7-3 spdy （略
 
## 7-4 http2.0


#### 总结：1.在传输层和应用层之间加上二进制分帧层，2. 压缩头信息，相同的头信息不用再发送，首部表维护。3.多路复用 4.服务端推送

 1. 二进制分帧，
 
	 HTTP2.0中所有加强性能的核心是二进制传输，在HTTP1.x中，我们是通过文本的方式传输数据。基于文本的方式传输数据存在很多缺陷，文本的表现形式有多样性，因此要做到健壮性考虑的场景必然有很多，但是二进制则不同，只有0和1的组合，因此选择了二进制传输，实现方便且健壮。
	在HTTP2.0中引入了新的编码机制，所有传输的数据都会被分割，并采用二进制格式编码。
	
	[!img](https://segmentfault.com/img/bVbgpF5?w=874&h=459)
	
	 
	  为了保证HTTP不受影响，那就需要在应用层（HTTP2.0）和传输层（TCP or UDP）之间增加一个二进制分帧层。在二进制分帧层上，HTTP2.0会将所有传输的信息分为更小的消息和帧，并采用二进制格式编码，其中HTTP1.x的首部信息会被封装到Headers帧，而Request Body则封装到Data帧。
  
  然后，HTTP 2.0 通信都在一个连接上完成，这个连接可以承载任意数量的双向数据流。相应地，每个数据流以消息的形式发送，而消息由一或多个帧组成，这些帧可以乱序发送，然后再根据每个帧首部的流标识符重新组装。
  
  
 2. HTTP2.0 首部压缩

 
 	我们知道，http请求和响应都是由【状态行、请求/响应头部、消息主题】三部分组成的。 一般而言，消息主体都会经过gzip压缩，或者本身传输的就是压缩过后的二进制文件（如图片、音频等），但是状态行和头部多是没有经过任何压缩，而是直接以纯文本的方式进行传输的。
 	因此，http2提出了对请求和响应的头部进行压缩，即不再只是压缩主题部分，这种压缩方式就是HAPCK --- 其设计简单而灵活。
 	
 
	HTTP 2.0 在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键-值对，对于相同的数据，不再通过每次请求和响应发送;
	
	通信期间几乎不会改变的通用键-值对(用户代理、可接受的媒体类型,等等)只 需发送一次。事实上,如果请求中不包含首部(例如对同一资源的轮询请求),那么 首部开销就是零字节。此时所有首部都自动使用之前请求发送的首部。
	
	如果首部发生变化了，那么只需要发送变化了数据在Headers帧里面，新增或修改的首部帧会被追加到“首部表”。首部表在 HTTP 2.0 的连接存续期内始终存在,由客户端和服务器共同渐进地更新 。
  
  
  
  
3. 多路复用

	在HTTP1.0中，我们经常会使用到雪碧图、使用多个域名等方式来进行优化，都是因为浏览器限制了同一个域名下的请求数量，当页面需要请求很多资源的时候，队头阻塞（Head of line blocking）会导致在达到最大请求时，资源需要等待其他资源请求完成后才能继续发送。
	HTTP2.0中，有两个概念非常重要：帧（frame）和流（stream）。
	帧是最小的数据单位，每个帧会标识出该帧属于哪个流，流是多个帧组成的数据流。
	所谓多路复用，即在一个TCP连接中存在多个流，即可以同时发送多个请求，对端可以通过帧中的表示知道该帧属于哪个请求。在客户端，这些帧乱序发送，到对端后再根据每个帧首部的流标识符重新组装。通过该技术，可以避免HTTP旧版本的队头阻塞问题，极大提高传输性能。  
  
4. 服务端推送

	在 HTTP 2.0 中，服务端可以在客户端某个请求后，主动推送其他资源。
	
	可以想象以下情况，某些资源客户端是一定会请求的，这时就可以采取服务端 push 的技术，提前给客户端推送必要的资源，这样就可以相对减少一点延迟时间。当然在浏览器兼容的情况下你也可以使用 prefetch 。

 
## 7-6 webDAV (略
## 7-7 http3 (略
